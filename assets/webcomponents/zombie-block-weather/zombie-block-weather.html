<link rel="import" href="../zombie-block/zombie-block.html">
<link rel="import" href="../zombie-config/zombie-config.html">
<link rel="import" href="../../bower/iron-icon/iron-icon.html">

<dom-module id="zombie-block-weather">
  <!-- Styling -->
  <link rel="import" type="css" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/1.3.2/css/weather-icons.min.css">
  <link rel="import" type="css" href="../zombie-block/zombie-block.css">
  <link rel="import" type="css" href="zombie-block-weather.css">
  <!-- Template -->
  <template>
    <paper-material elevation="1">
      <div class="content has-api-key">
        <p class="location"><a href="[[wundergroundUrl]]" target="_blank">[[weather.location]]</a></p>
        <p class="current conditions" title="[[weather.conditions]]">
          <i class$="[[weather.icon]]"></i>
        </p>
        <p class="current temperature">[[weather.temperature]]</p>
        <div class="clear"></div>
        <div class="forecasts">
          <template is="dom-repeat" items="{{weather.forecasts}}">
            <div class="forecast">
              <p class="day">[[item.day]]</p>
              <p class="conditions" title="[[item.conditions]]">
                <i class$="[[item.icon]]"></i>
              </p>
              <p class="temperature high">[[item.temperature.high]]</p>
              <p class="temperature low">[[item.temperature.low]]</p>
              <div class="clear"></div>
            </div>
          </template>
        </div>
      </div>
      <div class="content no-api-key">
        <p>To use this block, you'll need to provide a <a href="http://www.wunderground.com/weather/api" target="_blank">Weather Underground API key</a><iron-icon icon="open-in-new"></iron-icon> in the <a href="#" on-tap="onSettingsClick">settings</a> pane.</p>
      </div>
    </paper-material>
    <iron-ajax auto url="{{ajaxUrl}}" handle-as="json" on-response="onAjaxResponse"></iron-ajax>
  </template>
  <!-- Polymer glue -->
  <script src="zombie-block-weather.js"></script>
</dom-module>